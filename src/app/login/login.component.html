<div class="login-container">
  <div class="login-box" *ngIf="!showSignUpCard && newUser === false">
    <h1>Login</h1>
    <form (ngSubmit)="onSubmit()">
      <div class="input-group">
        <input
          type="email"
          placeholder="Email"
          [(ngModel)]="email"
          name="email"
          required
          autocomplete="email"
          aria-label="Email"
        />
      </div>
      <div class="input-group">
        <input
          type="password"
          placeholder="Password"
          [(ngModel)]="password"
          name="password"
          required
          aria-label="Password"
        />
      </div>

      <div class="forgot-password" *ngIf="isforgotvisible">
        <a href="#" (click)="forgotPassword(); $event.preventDefault()">Forgot Password?</a>
      </div>
      <p class="error-message" *ngIf="login_error">{{ login_error }}</p>
      <div class="button-container">
        <button type="submit" class="svg-button">Login</button>
      </div>

      <p>(or)</p>
      <div class="svg-container" (click)="signInWithGoogle()">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 32 32"
          aria-hidden="true"
          role="presentation"
          focusable="false"
          style="display: block; height: 30px; width: 30px;"
        >
          <path fill="#4285f4" d="M24.12 25c2.82-2.63 4.07-7 3.32-11.19H16.25v4.63h6.37A5.26 5.26 0 0 1 20.25 22z"></path>
          <path fill="#34a853" d="M5.62 21.31A12 12 0 0 0 24.12 25l-3.87-3a7.16 7.16 0 0 1-10.69-3.75z"></path>
          <path fill="#fbbc02" d="M9.56 18.25c-.5-1.56-.5-3 0-4.56l-3.94-3.07a12.08 12.08 0 0 0 0 10.7z"></path>
          <path fill="#ea4335" d="M9.56 13.69c1.38-4.32 7.25-6.82 11.19-3.13l3.44-3.37a11.8 11.8 0 0 0-18.57 3.43l3.94 3.07z"></path>
        </svg>
      </div>
    </form>

    <div class="signup-message">
      <p>You are new here? Please sign up!</p>
      <button class="signup-button" (click)="toggleSignUp()">Sign Up</button>
    </div>
  </div>

  <!-- Sign Up Card -->
  <div class="signup-card" *ngIf="showSignUpCard && newUser === false">
    <h2>Sign Up</h2>
    <form (ngSubmit)="onSignUp()">
      <div class="input-group">
        <input
          type="text"
          placeholder="Username"
          name="username"
          [(ngModel)]="username"
          required
          aria-label="Username"
        />
      </div>

      <div class="input-group">
        <input
          type="email"
          placeholder="Email"
          [(ngModel)]="signupEmail"
          name="signupEmail"
          required
          aria-label="Signup Email"
        />
        <p class="error-message" *ngIf="emailError">{{ emailError }}</p>
      </div>

      <div class="input-group">
        <input
          type="password"
          placeholder="Password"
          [(ngModel)]="signupPassword"
          name="signupPassword"
          required
          aria-label="Signup Password"
        />
      </div>

      <div class="input-group">
        <input
          type="password"
          placeholder="Confirm Password"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          required
          aria-label="Confirm Password"
        />
        <p class="error-message" *ngIf="passwordError">{{ passwordError }}</p>
      </div>

      <div class="input-group">
        <label for="dropdown">Choose your Role:</label>
        <select id="dropdown" name="dropdown" [(ngModel)]="selectedRole" required>
          <option *ngFor="let role of userRole" [value]="role.Role">{{ role.Role }}</option>
        </select>
        <p class="error-message" *ngIf="roleError">{{ roleError }}</p>
      </div>

      <p class="error-message" *ngIf="fieldError">{{ fieldError }}</p>

      <div class="button-container" *ngIf="submit_btn_visibl"> 
        <button  type="submit" class="svg-button">Submit</button>
      </div>
    </form>

    <button  *ngIf="!submit_btn_visibl" class="back-to-login-button" (click)="toggleSignUp()">Back to Login</button>
  </div>

  <div class="signup-card" *ngIf="newUser == true">
    <h2>Select Your Role:</h2>
    <form (ngSubmit)="onstoreRole()">
      <div class="input-group">
        <select id="dropdown" name="dropdown" [(ngModel)]="selectedRole" required>
          <option *ngFor="let role of userRole" [value]="role.Role">{{ role.Role }}</option>
        </select>
        <p class="error-message" *ngIf="roleError">{{ roleError }}</p>
      </div>

      <div class="button-container">
        <button type="submit" class="svg-button">Submit</button>
      </div>
    </form>
    <button class="back-to-login-button" (click)="toggleSignUp()">Back to Login</button>
  </div>
</div>
